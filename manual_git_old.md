# Руководство по GIT (командная строка)

# **Глоссарий**

**`Реппозиторий`** - папка с проектом, которая находится под наблюдением системы контроля версий и в которой производится версионирование.

**`Индексация`** - добавление для наблюдения (версиализации) указанного файла// сохранения файла с внесенными изменениями (состояние STAGED).

**`Коммит`** (commit) - сохранение (фиксация) состояния проекта, содержащее все наблюдаемые файлы и каталоги.

**`Ветвление`** (branching) означает отклонение от основной линии разработки, после которого работа перестает затрагивать эту самую основную линию.
***
# **Команды для работы с репозиторием**

**`git init`** - инициализирует репозиторий в такущей директории.

**`git status`** - вывод статуса *текущего* файла (с параметрами **`-s`** или **`--short`** информация выводится в упрощённом виде):
* **`U`** неиндексированный / ненаблюдаемый
* **`M`** модифицированный, но НЕиндексированный
* **`A`** индексированный (added = staged), но не коммитированный
* **`MM`** - модифицирован, индексирован и снова модифицирован (до коммита)
* комиттированный
* **`R`** - переименованный, но не комиттированный

**`git add FILE_NAME`** - инициализирует файл и делет его *текущим* для ***комитт***ирования:
* **`git add FILE_NAME_1 FILE_NAME_2`** - инициализировать можно сразу несколько файлов. Также можно использовать регулярные выражения (*, ? etc)
* **`git reset HEAD FILE_NAME`** - помогает сбросить  проиндексированные изменения (буферную зону), если новый коммит ещё не был создан.

**`git commit`** - создаёт коммит, запуская текстовый редактор для создания комментария (выход из редактора :qa Enter) 
* работает только с индексированными файлами, иначе выдает сообщение о том, что нечего коммитировать;
* **`git commit -m "YOUR_MESSAGE"`** - создаёт коммит и приклепляет к нему коментарий
* **`git commit -am "YOUR_MESSAGE"` или `git commit -a -m "YOUR_MESSAGE"`** - комбо комманд `git add` и `git commit -m` (работает только с инициализированными файлами, если таковые имеются);
* **`git commit --amend -am "NEW COMMENT"`** - **ЗАМЕНЯЕТ** последний коммит новым.

**`git diff`** - подробное описание, что именно изменилось между последним коммитом и текущей фодификацией файла (необходимо сохранить иземнения)
* **`git diff --staged`** - сравнивает последний коммит с индексированным файлом (состояние после **`git add`**)

**`git log`** - журнал всех коммитов с последнего коммита в текущей ветке до первого коммита проекта в главной ветке (в обратном порядке):
>выход из журнала осуществляется по нажатию **`Q`** на клавиатуре (необходимо, чтоб была включена английская раскладка). 
* **`--graph`** - вывод журнала коммитов с визаулизацией ветвления
* **`-p`** - показывает разницу каждого коммита
* **`-2`** - вывод журнала ограничен последними двумя коммитами
* **`--stat`** - выводит статистику по каждому коомиту
* **`--pretty=oneline (=short, =full, =fuller)`** - разный форматы вывода фурнала
* **`--oneline`** - вывод коммитов в сокращённом варианте по 1 коммиту на строку
* **`--pretty=format:"%h - %an | %ar: %s"`** - вывод журнала в форматированном виде (ищи таблицу условных сокращений).
* **`--all`** 
* **`--since, --after`** - Показывает только коммиты, внесенные после указанной даты.
* **`--until, --before`** - Показывает только коммиты, внесенные до указанной даты.
* **`--author`** - Показывает только коммиты определенного автора.
* **`--committer`** - Показывает только коммиты, внесенные определенным 
участником.
* **`--grep`** Показывает только коммиты с сообщением фиксации, содержащим указанную строку.
* **`-S`** - Показывает только коммиты, в которых добавленный или удаленный код совпадает с указанной строкой.


**`git checkout хэш.коммита`** - переключает указатель HEAD на указанный коммит (возможно использование первых 4-6 символов из 16-ричного кода коммита). При этом состояние текущей директории приводится к состоянию, соответствующему указанному коммиту (загружаются файлы в том состоянии, в котором они были на момент создания коммита, указанного в команде; все последующие изменения пропадают из текущей папки, но держатся в базе ГИТ-а).
* **`git checkout BRANCH_NAME`** - переключает указатель HEAD на конец указанной ветки.
***
# **Работа с ветвлением**

**`git branch`** - выводит список веток с указанием текущей ветки (отметка звёздочкой)

* **`git branch <new_branch_name> `** - создание новой ветки; ответвление создаётся из *текущей* ветки

**`git checkout -b <new_branch_name>`** - создание новой ветки с последующим на неё переключением

**`git branch -M <new_name>`** - переименование ветки

**`git branch -d <exist_branch_name>`** - удаление ветки

**`git checkout <exist_branch_name>`** - переключение на нужную ветку

**`git merge <exist_branch_name>`** - слияние указанной ветки с текущей.
> При слиянии веток может быть 2 варианта развития событий: слияние без конфликта (в старый файл добавляются новые сведения) и слияние с конфликтом (гит без участия пользователя не может решить, что заменить, а что оставить).  
Решение конфликта слияния может по выбору идти по 4 путям:
>1. оставить начальный вариант (не принимать изменения из сливаемой ветки);
>2. произвести замену текущего (current) состояния на входящее (incoming);
>3. оставить оба варианта (accept both);
>4. произвести ручное сравнение (compare changes), после которого вернуться и всё-таки решить, что делать.

***

# **Настройки GIT**
* **`git version`** - показывает установленную версию GIT
* **`git config --global user.name "Your Name"`** - указывает GIT-у Ваше имя, которым будут подписываться все коммиты
* **`git config --global user.email "your_email@whatever.com"`** - указывает GIT-у Ваш e-mail, которым будут подписываться все коммиты
* **`git config --global alias.co checkout`** - записывает в глобальные настройки GIT на Вашем компьютере короткий псевдоним, которым можно пользоваться вместо того, чтобы полностью печатать команду. Здесь: псевдоним **`со`** для команды **`checkout`**.
* **`git config --global alias.ci commit`** - псевдоним **`сi`** для команды **`commit`**. 
* **`git config --global alias.hist "log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short"`** - псевдоним **`hist`** для команды **`log`** с множеством параметров (заключено в двойные кавычки).

***

# **Работа с файлами**
**`git mv OLD-FILENAME NEW-FILENAME`** - переименование файла с сохранением всех коммитов:
* после переименования в статусе файла и проводнике `Visual Studio Code` появляется буква **`R`** (Rename), после чего необходимо создать новый коммит с комментарием о переименовании;
* можно запустить **`git log`** для того, чтобы убедиться, что все коммиты сохранены. При этом GIT воссоздает файл со старым именем в репозитории и помечает его как *ненаблюдаемый (untracked)*.
* **`git mv FILENAME DIR-NAME`** - перемещает файл FILENAME в папку DIR-NAME.

**`git rm FILE_NAME (DIRECTORY_NAME)`** - удаляет файл или папку из отслеживания GITом.

**`mkdir DIRECTORY_NAME`** - создать каталог.  
**`cd DIRECTORY_NAME`** - переключиться на каталог.  
**`touch FILE_NAME`** - создать файл.  
**`cat FILE_NAME`** - показывает содержимое файла.  
**`clear`** - очистка окна терминала (история команд сохнраняется).

***

# **Git HUB**
крупнейший веб-сервис для хостинга IT-проектов и их совместной разработки.
![GitHub.com](https://images.peerspot.com/image/upload/c_scale,f_auto,q_auto,w_200/jchqVAR8aWx3R8jUQFb1rcXc.png)

***
# Работа с командной строкой PowerShell

Очистка истории

`Remove-Item (Get-PSReadlineOption).HistorySavePath`